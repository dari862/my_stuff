#!/bin/sh
. "$__distro_path_lib"
command_exist() {
	if command -v $1 > /dev/null 2>&1;then
		return
	else
		return 1
	fi
}

skel_keybinds_dir="${__distro_path_root}/system_files/skel/.config/keybinds"

file_to_cat="General"

if command_exist openbox;then
	file_to_cat="${file_to_cat} openbox"
fi
if command_exist sxhkd;then
	file_to_cat="${file_to_cat} sxhkd"
fi
if command_exist alacritty;then
	file_to_cat="${file_to_cat} alacritty"
fi
if command_exist geany;then
	file_to_cat="${file_to_cat} geany"
fi
if command_exist kitty;then
	file_to_cat="${file_to_cat} kitty"
fi
if command_exist mpv;then
	file_to_cat="${file_to_cat} mpv"
fi
if command_exist ncmpcpp;then
	file_to_cat="${file_to_cat} ncmpcpp"
fi
if command_exist zathura;then
	file_to_cat="${file_to_cat} zathura"
fi
if command_exist nsxiv;then
	file_to_cat="${file_to_cat} nsxiv"
fi
if command_exist thunar;then
	file_to_cat="${file_to_cat} thunar"
fi
if command_exist clipit;then
	file_to_cat="${file_to_cat} clipit"
fi
if command_exist conky;then
	file_to_cat="${file_to_cat} conky"
fi
if command_exist lxterminal;then
	file_to_cat="${file_to_cat} lxterminal"
fi
if command_exist rxvt;then
	file_to_cat="${file_to_cat} rxvt"
fi
if command_exist viewnior;then
	file_to_cat="${file_to_cat} viewnior"
fi

file_to_cat="${file_to_cat} myshell"

mkdir -p "${skel_keybinds_dir}"
cat ${file_to_cat} | tee "${skel_keybinds_dir}"/keybinds.conf >/dev/null 2>&1

for d in /home/*/; do
	if [ -f "${usr_setup_flag_file}" ];then
		# Create config folders if no exists
		user_and_group=$(stat "$(dirname "${d}.config")" -c %u:%g)
		d="${d}.config/keybinds"; [ ! -d "$d" ] && mkdir -v "$d" && chown -R "$user_and_group" "$d"
		cp -r "${skel_keybinds_dir}/keybinds.conf" "$d" && chown -R $user_and_group "${d}${CONF_FILE}"
	fi
done
