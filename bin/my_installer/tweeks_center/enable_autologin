#!/bin/sh
# need superuser : called by my-installer
if [ "$(id -u)" -eq 0 ];then
	_SUPERUSER=""
else
	_SUPERUSER="my-superuser"
fi

lightdmconf="/etc/lightdm/lightdm.conf"

if grep -q "^autologin-user=" "${lightdmconf}";then # enabled
	tweek_enabled=true 
elif [ "$1" = "--is-enable" ] || [ "$check_tweek" = "true" ];then # disabled and only check
	tweek_enabled=false
else
	say "enable_autologin"
	${_SUPERUSER} sed -i "s/^#autologin-user=/autologin-user=/g" ${lightdmconf}
	${_SUPERUSER} sed -i "s/^#autologin-user-timeout=/autologin-user-timeout=/g" ${lightdmconf}
	${_SUPERUSER} sed -i "s/^autologin-user=.*$/autologin-user=${USER}/g" ${lightdmconf}
fi
