#!/bin/sh
if [ "$Distro_installer_mode" = false ];then
	_SUPERUSER="my-superuser"
	[ "$(id -u)" -eq 0 ] && _SUPERUSER=""
fi

lightdmconf="/etc/lightdm/lightdm.conf"

if grep -q "^autologin-user=" "${lightdmconf}";then # enabled
	tweek_enabled=true 
elif [ "$1" = "--is-enable" ] || [ "$check_tweek" = "true" ];then # disabled and only check
	tweek_enabled=false
else
	say "enable_autologin"
	${_SUPERUSER} sed -i "s/^#autologin-user=/autologin-user=/g" ${lightdmconf}
	${_SUPERUSER} sed -i "s/^#autologin-user-timeout=/autologin-user-timeout=/g" ${lightdmconf}
	${_SUPERUSER} sed -i "s/^autologin-user=.*$/autologin-user=${USER}/g" ${lightdmconf}
fi
