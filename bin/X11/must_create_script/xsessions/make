#!/bin/sh
set -e
__distro_path_lib="$__distro_path_lib"
. "$__distro_path_lib"
. "${__distro_path_root}/lib/common/WM"
xsessions_path="${__distro_path_root}/system_files/bin/xsessions"
mkdir -p "$xsessions_path"

for wm in openbox bspwm dwm;do
tee  "$xsessions_path"/"$wm" > /dev/null 2>&1 << EOF
#!/bin/sh
export __distro_path_lib="${__distro_path_lib}"
. "\$__distro_path_lib"
EOF
cat "main.sh" | tee -a "$xsessions_path"/"$wm" > /dev/null 2>&1
tee -a  "$xsessions_path"/"$wm" > /dev/null 2>&1 << EOF
mkdir -p "\$HOME/$WM_config_dir_name"
echo "$wm" | tee "\$HOME/$WM_config_dir_name/$WM_name_file_name" >/dev/null 2>&1
EOF
cat "$wm.sh" | tee -a "$xsessions_path"/"$wm" > /dev/null 2>&1
done
chmod +x "$xsessions_path"/*
