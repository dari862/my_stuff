#!/bin/sh
. "$__distro_path_lib"
HELP='    my-install-pipemenu a obmenu Pipe Menu for installing applications
    It should normally be called from a obmenu menu.

Options (usually passed from the menu):
    -h --help   show this message
    --openboxmenu   generate xml obmenu pipemenu for installing applications.
    --jgmenu   generate jgmenu pipemenu for installing applications.
    (the package must be in one of the app lists in this file)'

########################################################################
gui_scripts_dir="${__distro_path_root}/system_files/gui_scripts"

# look for a help option somewhere
for i in "$@"
do
    case "$i" in
    -h|--help)
        echo "$HELP"
        exit 0
        ;;
    esac
done

. "${__distro_path_root}/lib/common/pipemenu"

cd "${gui_scripts_dir}"

obmenu_options(){
	menuStart "GuiAppsPipemenu" "${__distro_title} GUI Apps"
	for gui in *;do
		menuItem "$gui" "${gui_scripts_dir}/$gui"
	done
    menuEnd
 #    menuEnd   
}

jgmenu_options(){
	for gui in *;do
		jgmenuItem "$gui" "${gui_scripts_dir}/$gui"
	done
    jgmenuEnd
#    menuEnd
}

if [ "${1-}" = "--jgmenu" ];then # pipemenu
	jgmenu_options
else
	obmenu_options
fi
exit 0
