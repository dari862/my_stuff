#!/bin/sh
_style="${1:-}"

show_em(){
	echo "[ERROR] $0 : $1"
	exit 1
}

CONFIGPATH="$HOME/.config"

create_Distro_config(){
	# Distro_config
	##############
	# wallpaper_mode
	##############
	:
}

create_dunstrc(){
	# dunstrc
	##############
	:
}

create_gtk(){
	# gtkrc_theme
	##############
	:
}

create_plank(){
	# plank
	##############
	:
}

create_lightdm(){
	# lightdm-greeter
	##############
	:
}

create_jgmenu(){
	. "${theme_color_creater_output_folder}/colors-jgmenu.conf"
	jgmenurc_file="${CONFIGPATH}/jgmenu/jgmenurc"
	#create jgmenu theme file
	sed -i "s/font .*/font                = $font $size/g" "$jgmenurc_file"
	sed -i "s/color_menu_bg .*/color_menu_bg       = $color_menu_bg/g" "$jgmenurc_file"
	sed -i "s/color_menu_border .*/color_menu_border   = $color_menu_border/g" "$jgmenurc_file"
	sed -i "s/color_norm_bg .*/color_norm_bg       = $color_norm_bg/g" "$jgmenurc_file"
	sed -i "s/color_norm_fg .*/color_norm_fg       = $color_norm_fg/g" "$jgmenurc_file"
	sed -i "s/color_sel_bg .*/color_sel_bg        = $color_sel_bg/g" "$jgmenurc_file"
	sed -i "s/color_sel_fg .*/color_sel_fg        = $color_sel_fg/g" "$jgmenurc_file"
	sed -i "s/color_sel_border .*/color_sel_border    = $color_sel_border/g" "$jgmenurc_file"
	sed -i "s/color_title_bg .*/color_title_bg      = $color_title_bg/g" "$jgmenurc_file"
	sed -i "s/color_title_fg .*/color_title_fg      = $color_title_fg/g" "$jgmenurc_file"
	sed -i "s/color_title_border .*/color_title_border  = $color_title_border/g" "$jgmenurc_file"
	sed -i "s/color_sep_fg .*/color_sep_fg        = $color_sep_fg/g" "$jgmenurc_file"
	sed -i "s/stay_alive .*/stay_alive        = $stay_alive/g" "$jgmenurc_file"
	sed -i "s/menu_padding_right .*/menu_padding_right        = $menu_padding_right/g" "$jgmenurc_file"
	sed -i "s/menu_padding_bottom .*/menu_padding_bottom        = $menu_padding_bottom/g" "$jgmenurc_file"
	sed -i "s/menu_padding_left .*/menu_padding_left        = $menu_padding_left/g" "$jgmenurc_file"
	sed -i "s/menu_radius .*/menu_radius        = $menu_radius/g" "$jgmenurc_file"
	sed -i "s/sep_halign .*/sep_halign        = $sep_halign/g" "$jgmenurc_file"
	sed -i "s/icon_size .*/icon_size        = $icon_size/g" "$jgmenurc_file"
	sed -i "s/icon_theme .*/icon_theme        = $icon_theme/g" "$jgmenurc_file"
	sed -i "s/menu_border .*/menu_border        = $menu_border/g" "$jgmenurc_file"
}

create_geany(){
	blob_geany_theme_path="${CONFIGPATH}/geany"
	echo "${_style}.conf" > "${blob_geany_theme_path}/theme.conf"
}

create_kitty(){
	blob_kitty_theme_path="${CONFIGPATH}/kitty"
	echo "background_opacity 0.8" > "${blob_kitty_theme_path}/theme.conf"
	echo "# color scheme" >> "${blob_kitty_theme_path}/theme.conf"
	echo "include ./themes/${_style}.conf" >> "${blob_kitty_theme_path}/theme.conf"
}

create_alacritty(){
	blob_alacritty_theme_path="${CONFIGPATH}/alacritty"
	( cd "$blob_alacritty_theme_path" && ln -sf "colorschemes/${_style}.yml" "colors.yml" )
}

create_rofi(){
	cp -r "${theme_color_creater_output_folder}/colors-rofi.rasi" "${CONFIGPATH}/rofi/theme.rasi"
}

create_Xresources(){
	cp -r "${theme_color_creater_output_folder}/colors.Xresources" "${CONFIGPATH}/x11/Xresources.d/themes/${_style}"
	( cd "${CONFIGPATH}/x11/Xresources.d" && ln -sf "themes/${_style}" "colors" )
}

create_bspwm(){
	cp -r "${theme_color_creater_output_folder}/colors-dunstrc.conf" "${CONFIGPATH}/bspwm/theme.conf"
}

create_openbox(){
	reconfigure-openbox || show_em "failed to run reconfigure-openbox "
}

create_Distro_config
create_lightdm
create_plank
create_gtk
create_dunstrc

if [ -d "${CONFIGPATH}/jgmenu" ];then
	create_jgmenu
fi

if [ -d "${CONFIGPATH}/geany" ];then
	create_geany
fi

if [ -d "${CONFIGPATH}/kitty" ];then
	create_kitty
fi

if [ -d "${CONFIGPATH}/alacritty" ];then
	create_alacritty
fi

if [ -d "${CONFIGPATH}/rofi" ];then
	create_rofi
fi

if [ -d "${CONFIGPATH}/x11/Xresources.d" ];then
	create_Xresources
fi

if [ -d "${CONFIGPATH}/bspwm" ];then
	create_bspwm
fi

if [ -d "${CONFIGPATH}/openbox" ];then
	create_openbox
fi
