#!/bin/sh
. "$__distro_path_lib"
. "${__distro_path_root}/lib/common/WM"
. "${Distro_config_file}"

if [ ! -d "$HOME/.config/nitrogen" ];then
	mkdir -p "$HOME/.config/nitrogen"
fi

if [ ! -f "$HOME/.config/nitrogen/nitrogen.cfg" ];then
	tee "$HOME/.config/nitrogen/nitrogen.cfg" <<- EOF >/dev/null 2>&1
	[geometry]
	posx=0
	posy=27
	sizex=450
	sizey=500

	[nitrogen]
	view=icon
	recurse=true
	sort=alpha
	icon_caps=false
	dirs=${__distro_path_root}/my_wallpapers;
	EOF
fi

if nitrogen;then
	picked_wallpaper="$(grep 'file=' "$HOME/.config/nitrogen/bg-saved.cfg" | awk -F= '{print $2}' )"
	setbg -R "${picked_wallpaper}"
fi
