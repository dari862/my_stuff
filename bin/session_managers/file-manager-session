#!/bin/sh
. "$__distro_path_lib"

file_manager_name="my-file-manager"
file_manager_real="$(basename $(realpath $(which my-file-manager)))"
if [ "${file_manager_real}" = "pcmanfm" ];then
	file_manager_command="exec my-file-manager -d"
elif [ "${file_manager_real}" = "thunar" ];then
	file_manager_command="exec my-file-manager --daemon"
else
	exit
fi

stop() {
	"${__distro_path_root}"/bin/WM/kill_process.sh $file_manager_name
}

start() {
	pidof -q ${file_manager_real} || setsid ${file_manager_command} &
}

case "${1}" in
	""|restart)
		stop
		start		
	;;
	start)
		start		
	;;
	stop)	
		stop	
	;;
	*)	
		echo "Usage: file-manager-session [start|stop|restart]"
	;;
esac
