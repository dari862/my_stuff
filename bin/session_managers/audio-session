#!/bin/sh

sleep_time="${2:-0}"

if command -v pnmixer >/dev/null 2>&1;then
	audio_app="pnmixer"
elif command -v pasystray >/dev/null 2>&1;then
	audio_app="pasystray"
elif command -v volumeicon >/dev/null 2>&1;then
	audio_app="volumeicon"
else
	echo "[ERROR] $0 : failed to file audio_app."
	exit 1
fi

stop() {
	kill_process.sh ${audio_app}
	wait
}

start() {
	pidof -q ${audio_app} || (sleep ${sleep_time} && ${audio_app} ) &
}

case "${1}" in
	""|restart)
		stop
		start		
	;;
	start)
		start		
	;;
	stop)	
		stop	
	;;
	*)	
		echo "Usage: audio-session [start|stop|restart]"
	;;
esac
