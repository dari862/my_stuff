#!/bin/sh
. "$__distro_path_lib"
. "${__distro_path_root}/lib/common/WM"

mpd-session start
mpd-session db &

if mkdir -p "/tmp/$USER";then
	chmod 700 "/tmp/$USER"
else
	echo "$0: ERROR failed to create /tmp/$USER"
fi

if [ ! -f "${Distro_config_file}" ];then
	cp -r "${__distro_path_root}/system_files/blob/polybar/default/config/WM_common_config/Distro_config" "$WM_config_dir"
fi

if [ ! -f "${WM_config_dir}/rofi_picked" ];then	
	_picked_panel_="$(panel_picker)"
	style_setter "$_picked_panel_"
	touch "${WM_config_dir}/rofi_picked"
fi

dotscreenlayout_profile="$(ls ~/.screenlayout/*.sh 2>/dev/null | head -1 || :)"
if [ -n "$dotscreenlayout_profile" ];then
	"$dotscreenlayout_profile"
elif [ -f "$display_script" ];then
	"$display_script"
else
	displayselect auto noninteractive
fi

displayselect watch &

setbg -r

#polkit-session start &

notification-d-session start &

file-manager-session start &

