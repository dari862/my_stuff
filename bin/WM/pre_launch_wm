#!/bin/sh
. "$__distro_path_lib"
. "${__distro_path_root}/lib/common/WM"

mpd-session start
mpd-session db &

if mkdir -p "/tmp/$USER";then
	chmod 700 "/tmp/$USER"
else
	echo "$0: ERROR failed to create /tmp/$USER"
fi

if [ ! -f "${Distro_config_file}" ];then
	cat <<- EOF > "${Distro_config_file}"
	_panel_name_="polybar"
	ROFI_STYLE="default"
	polybar_STYLE="default"
	conky_sessionfile=".config/conky/openbox-conky.conf"
	tint2_sessionfile="/.config/tint2/default.tint2rc"
	EOF
fi

if [ ! -f "${WM_config_dir}/rofi_picked" ];then	
	panel_picker
	style_setter
	touch "${WM_config_dir}/rofi_picked"
fi

dotscreenlayout_profile="$(ls ~/.screenlayout/*.sh 2>/dev/null | head -1 || :)"
if [ -n "$dotscreenlayout_profile" ];then
	"$dotscreenlayout_profile"
elif [ -f "$display_script" ];then
	"$display_script"
else
	displayselect auto noninteractive
fi

displayselect watch &

setbg -r

#polkit-session start &

notification-d-session start &

file-manager-session start &

