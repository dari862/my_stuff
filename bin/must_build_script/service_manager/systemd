#!/bin/sh
# need superuser : var (_SUPERUSER)
set -e
option=${1-}
service=${2-}
user=""
if [ "$(id -u)" -eq 0 ];then
	_SUPERUSER=""
else
	_SUPERUSER="my-superuser"
fi
if [ "${service}" = "user" ];then
	user="--user"
	service=${3-}
	_SUPERUSER=""
fi

if [ "${option}" = "start" ];then
	$_SUPERUSER systemctl start ${service}
elif [ "${option}" = "restart" ];then
	$_SUPERUSER systemctl restart ${service}
elif [ "${option}" = "is-enable" ];then
	systemctl is-enabled --quiet ${service}
elif [ "${option}" = "is-active" ];then
	systemctl is-active --quiet ${service}
elif [ "${option}" = "stop" ];then
	$_SUPERUSER systemctl stop ${service}.
elif [ "${option}" = "enable" ];then
	$_SUPERUSER systemctl ${user} enable --now ${service}
elif [ "${option}" = "disable" ];then
	$_SUPERUSER systemctl ${user} disable --now ${service}
elif [ "${option}" = "cleanup" ];then
	$_SUPERUSER journalctl --vacuum-time=3d
elif [ "${option}" = "reload" ];then
	$_SUPERUSER systemctl daemon-reload
elif [ "${option}" = "status" ];then
	$_SUPERUSER systemctl is-enabled --quiet ${service} && $_SUPERUSER systemctl is-active --quiet ${service}
else
	echo "option are enable is-enable is-active disable start restart stop"
fi
